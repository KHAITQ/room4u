<?xml version='1.0' encoding='UTF-8' ?> 
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
      xmlns:f="http://xmlns.jcp.org/jsf/core"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:p="http://xmlns.jcp.org/jsf/passthrough"
      xmlns:c="http://xmlns.jcp.org/jsp/jstl/core">

    <h:head>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
        <meta name="viewport" content="initial-scale=1.0"/>
        <!--CSS-->
        <h:outputStylesheet  name="./css/bootstrap.min.css"/>
        <h:outputStylesheet  name="./css/bootstrap-datetimepicker.min.css"/>
        <h:outputStylesheet  name="./css/light.css"/>
        <h:outputStylesheet name="./css/jquery.rating.css"/>
        <h:outputStylesheet name="./css/style.css"/>
        <h:outputStylesheet name="./css/rating.css"/>

        <!--SCRIPT-->
        <h:outputScript name="./js/jquery-1.10.2.min.js"></h:outputScript>
        <h:outputScript name="./js/bootstrap.min.js"></h:outputScript>
        <h:outputScript name="./js/Chart.min.js"></h:outputScript>

        <h:outputScript name="./js/jquery.rating.js"></h:outputScript>
        <h:outputScript name="./js/moment.min.js"></h:outputScript>
        <h:outputScript name="./js/bootstrap-datetimepicker.min.js"></h:outputScript>
        <h:outputScript name="./js/jquery.validate.min.js"></h:outputScript>
        <h:outputScript name="./js/jquery.bootstrap-growl.min.js"></h:outputScript>
        <!--<h:outputScript name="./js/jquery.total-storage.js"></h:outputScript>-->

        <h:outputScript name="./js/js_custom.js"></h:outputScript>
        <h:outputScript name="./js/js_custom_can.js"></h:outputScript>
        <h:outputScript name="./js/js_custom_khai.js"></h:outputScript>
        <h:outputScript name="./js/js_rating_huy.js"></h:outputScript>
        <h:outputScript name="./js/js_homepage_cuong.js"></h:outputScript>



        <title><ui:insert name="title"/></title>

    </h:head>

    <h:body>
        <h:form>
            <nav class="navbar navbar-inverse">
                <div class="container-fluid">
                    <div class="navbar-header ">
                        <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-example-navbar-collapse-2">
                            <span class="sr-only">Toggle navigation</span>
                            <span class="icon-bar"></span>
                            <span class="icon-bar"></span>
                            <span class="icon-bar"></span>
                        </button>

                        <a class="navbar-brand homepage_logo" href="."> <span class="glyphicon glyphicon-globe" style="margin-right: 10px" aria-hidden="true"></span>Room4U</a>
                    </div>
                    <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-2">
                        <ul class="nav navbar-nav">
                            <!--<li class="active"><a href="#"><img  src="resources/images/logo3.png" alt=""/></a></li>-->
                            <li><a href="./">Trang chủ <span class="sr-only">(current)</span></a></li>
                            <li><a href="./aboutus.jsf">Giới thiệu</a></li>
                            <li><a href="./contact.jsf">Liên hệ</a></li>
                            <li><a href="./faq.jsf">FAQ</a></li>
                            <!--<li><a data-toggle="modal" data-target="#userLoginModal"  href="#" >Testing</a></li>-->
                        </ul>

                        <ul class="nav navbar-nav navbar-right homepage_menu_right">

                            <li > 
                                <h:commandLink action="./profile.jsf" rendered="#{customerBean.curCust != null}" >
                                    <h:outputText value="#{customerBean.curCust.roleId.roleName}"></h:outputText> 
                                    <h:graphicImage  style="margin:0 8px" value="/images/#{customerBean.curCust.images}" />
                                    <h:outputText value="#{customerBean.curCust.custName}"></h:outputText>
                                </h:commandLink>
                                <!--<a   href="./profile.jsf">Người cho thuê <img src="./resources/images/upload/20151013170402happiness_love-wallpaper-1366x768.jpg"/> Nick Ho</a>-->
                            </li>
                            <li>
                                <h:commandLink rendered="#{customerBean.curCust == null}" p:data-toggle="modal" p:data-target="#user_login_modal" >
                                    <span class="glyphicon glyphicon-user"></span> Đăng nhập
                                    <f:ajax execute="@form" render="@form" />
                                </h:commandLink>
                                <!--<a data-toggle="modal" data-target="#user_login_modal"  href="#"><span class="glyphicon glyphicon-user"></span> Đăng nhập</a>-->
                            </li>
                            <li>
                                <h:commandLink rendered="#{customerBean.curCust == null}"  p:data-toggle="modal" p:data-target="#user_register_modal">
                                    <f:ajax execute="@form" render="@form"/>
                                    <span class="glyphicon glyphicon-registration-mark"></span> Đăng ký
                                </h:commandLink>
                                <!--<a data-toggle="modal" data-target="#user_register_modal" href="#"><span class="glyphicon glyphicon-registration-mark"></span> Đăng ký</a>-->
                            </li>
                            <li>
                                <h:link  outcome="./Admin/index.jsf" rendered="#{customerBean.curCust != null and customerBean.curCust.roleId.roleId == 1 }"><span class="glyphicon glyphicon-cog"></span> Quản lý</h:link>

                            </li>

                            <li><h:commandLink rendered="#{customerBean.curCust != null}" action="#{customerBean.logout()}"><span class="glyphicon glyphicon-log-out"></span> Log out</h:commandLink></li>


                        </ul>
                    </div>
                </div>
            </nav>
        </h:form>

        <div class="container">

            <div class="row">

                <div class="col-md-12 col-xs-12">
                    <!--index page-->
                    <div id="content" class="center_content">
                        <ui:insert name="content"></ui:insert>
                    </div>
                </div>

                <!--side bar-->
                <!--                <div class="col-md-4 col-xs-12">
                                    <div class="panel panel-primary">
                                        <div class="panel-heading">
                                            <span class="glyphicon glyphicon-hand-right"></span>
                                            Hỗ trợ</div>
                                        <div class="panel-body">
                                            <p>Testing</p>
                                            <a href="#" class="btn btn-primary homepage_btnreadmore">Chi tiet</a>
                                        </div>
                                    </div>
                                </div>-->

            </div>


        </div>

        <!--bottom page-->
        <div id="bottom" class="row">
            <div class="col-md-12">
                <blockquote class="pull-right">
                    <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Integer posuere erat a ante.</p>
                    <small>Someone famous in <cite title="Source Title">Source Title</cite></small>
                </blockquote>
            </div>
        </div>

        <!--Modal post room-->
        <div class="modal fade" id="modal_post_room" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">
            <div class="modal-dialog" role="document" style="width: 60%;margin: auto">
                <div class="modal-content">
                    <div class="modal-header">
                        <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                        <h4 class="modal-title" id="myModalLabel">ĐĂNG PHÒNG</h4>
                    </div>
                    <h:form id="frmPostRoom" class="form-horizontal"  enctype="multipart/form-data"  >
                        <div class="modal-body">
                            <fieldset>
                                <div class="form-group">
                                    <label for="inputName" class="col-lg-3 control-label">Tên phòng</label>
                                    <div class="col-lg-9">
                                        <h:inputText id="accomName"  value="#{landlord.room.accomName}" class="form-control" />
                                    </div>
                                </div>

                                <div class="form-group">
                                    <label for="inputPrice" class="col-lg-3 control-label">Giá phòng</label>
                                    <div class="col-lg-9">
                                        <h:inputText id="roomPrice" value="#{landlord.room.price}" class="form-control"  />
                                    </div>
                                </div>
                                <div class="form-group">
                                    <label for="inputAddress" class="col-lg-3 control-label">Địa chỉ</label>
                                    <div class="col-lg-9">
                                        <h:inputText id="hourseNumber" value="#{landlord.houseNumber}" class="form-control"  p:placeholder="Số nhà"/>
                                        <h:inputText id="roomStreet" value="#{landlord.street}"  class="form-control"  p:placeholder="Đường" />
                                        <h:inputText id="roomWard"  value="#{landlord.ward}"  class="form-control"  p:placeholder="Phường"/>
                                        <h:inputText id="roomDistrict" value="#{landlord.district}"  class="form-control"  p:placeholder="Quận"/>
                                        <h:inputText id="roomCity" value="#{landlord.city}"  class="form-control"  p:placeholder="Thành phố" />
                                    </div>
                                </div>
                                <div class="form-group">
                                    <label for="textArea"  class="col-lg-3 control-label">Mô tả</label>
                                    <div class="col-lg-9">
                                        <h:inputTextarea id="roomDescription" class="form-control" value="#{landlord.room.description}" rows="5" />
                                        <span class="help-block">Giới thiệu tổng quan về phòng</span>
                                    </div>
                                </div>

                                <div class="form-group">
                                    <label for="inputBed"  class="col-lg-3 control-label">Số giường</label>
                                    <div class="col-lg-9">
                                        <h:inputText id="numberOfBed"  value="#{landlord.room.noOfBed}" class="form-control" />
                                    </div>
                                </div>

                                <div class="form-group">
                                    <label for="inputPerson" class="col-lg-3 control-label">Số người</label>
                                    <div class="col-lg-9">
                                        <h:inputText id="numberOfPerson" value="#{landlord.room.noOfPersons}" class="form-control" />
                                    </div>
                                </div>

                                <div class="form-group">
                                    <label for="inputToilet" class="col-lg-3 control-label">Số toilet</label>
                                    <div class="col-lg-9">
                                        <h:inputText id="roomToilet"  value="#{landlord.room.noOfToilet}" class="form-control" />
                                    </div>
                                </div>

                                <div class="form-group">
                                    <label for="inputImage" class="col-lg-3 control-label">Hình đại diện</label>
                                    <!--<input type="file" id="fileinput" multiple="multiple" accept="image/*" />-->
                                    <div class="col-lg-9">
                                        <h:inputFile  id="roomThumbnail" value="#{landlord.thumbnail}" ></h:inputFile>

                                    </div>
                                </div>
                                <div class="form-group">
                                    <label for="inputImage" class="col-lg-3 control-label">Hình 1</label>
                                    <div class="col-lg-9">
                                        <h:inputFile id="roomFile1" value="#{landlord.file1}" />
                                    </div>
                                </div>
                                <div class="form-group">
                                    <label for="inputImage" class="col-lg-3 control-label">Hình 2</label>
                                    <div class="col-lg-9">
                                        <h:inputFile id="roomFile2" value="#{landlord.file2}" />
                                    </div>
                                </div>
                                <div class="form-group">
                                    <label for="inputImage" class="col-lg-3 control-label">Hình 3</label>
                                    <div class="col-lg-9">
                                        <h:inputFile id="roomFile3" value="#{landlord.file3}" />
                                    </div>
                                </div>
                            </fieldset>
                            <h:inputText id="txtRoomFullAddress" value="#{landlord.roomFullAddress}"/>
                        </div>
                        <div class="modal-footer" style="text-align: right">
                            <!--<input type="button" value="Testing" onclick="getLngLatBaseOnAddress()"/>-->
                            <button type="button" class="btn btn-default" data-dismiss="modal">Đóng</button>
                            <h:commandButton  class="btn btn-primary" value="Đăng bài"/>
                            <h:commandButton id="btnSubmitPostRoom"  class="btn btn-primary" value="Submit Đăng bài">
                                <f:ajax execute="@form" render="@form" listener="#{landlord.createRoom()}"/>
                            </h:commandButton>
                        </div>
                    </h:form>
                </div>
            </div>
        </div>

        <!-- Modal Login -->
        <div class="modal fade" id="user_login_modal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">
            <div class="modal-dialog" role="document">
                <div class="modal-content">
                    <div class="modal-header">
                        <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                        <h4 class="modal-title" id="myModalLabel">Đăng nhập tài khoản</h4>
                    </div>
                    <h:form id="frmUserLogin" class="form-horizontal">
                        <div class="modal-body">
                            <fieldset>

                                <div class="form-group">
                                    <label for="txtUserName" class="col-lg-3 control-label">Tài khoản</label>
                                    <div class="col-lg-9">
                                        <h:inputText id="txtUserName" value="#{customerBean.accName}" autocomplete="false"  class="form-control" />
                                    </div>
                                </div>

                                <div class="form-group">
                                    <label for="txtPassword"  class="col-lg-3 control-label">Mật khẩu</label>
                                    <div class="col-lg-9">
                                        <h:inputSecret id="txtPassword" value="#{customerBean.password}" class="form-control"  />

                                    </div>
                                </div>


                                <h:commandButton id="btnLoginParams" value="Welcome Me" style="display: none">
                                    <f:ajax  execute="txtUserName txtPassword"   render="txtLoginResult" onevent="LoginEventHandler"/>
                                </h:commandButton>
                                <h:outputText id="txtLoginResult" value="#{customerBean.checkLogin()}" style="display: none" />

                            </fieldset>
                        </div>
                        <div class="modal-footer" style="text-align: right">
                            <button type="button" class="btn btn-default" data-dismiss="modal">Đóng</button>
                            <h:commandButton id="btnLogin"   class="btn btn-primary" value="Đăng nhập">
                                <!--<f:ajax execute="@form"    render="txtLoginResult"   />-->
                            </h:commandButton>

                        </div>
                    </h:form>

                </div>
            </div>
        </div>

        <!--User register modal-->
        <div class="modal fade" id="user_register_modal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">
            <div class="modal-dialog" role="document">
                <div class="modal-content">
                    <div class="modal-header">
                        <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                        <h4 class="modal-title" id="myModalLabel">Đăng ký tài khoản</h4>
                    </div>
                    <h:form id="frmUserRegister" class="form-horizontal" enctype="multipart/form-data" >
                        <div class="modal-body">
                            <fieldset>
                                <div class="form-group">
                                    <label for="txtCustName" class="col-lg-3 control-label">Tên bạn</label>
                                    <div class="col-lg-9">
                                        <h:inputText id="txtCustName" value="#{customerBean.c.custName}" class="form-control" />
                                    </div>
                                </div>
                                <div class="form-group">
                                    <label for="txtCustAccount" class="col-lg-3 control-label">Tên đăng nhập</label>
                                    <div class="col-lg-9">
                                        <h:inputText id="txtCustAccount" autocomplete="false"  value="#{customerBean.c.accountCustomer}" class="form-control" />
                                    </div>
                                </div>
                                <div class="form-group">
                                    <label for="txtCustPass" class="col-lg-3 control-label">Mật khẩu</label>
                                    <div class="col-lg-9">
                                        <h:inputSecret id="txtCustPass"  value="#{customerBean.c.password}"  class="form-control" />
                                    </div>
                                </div>
                                <div class="form-group">
                                    <label for="txtCustPassConfirm" class="col-lg-3 control-label">Nhập lại mật khẩu</label>
                                    <div class="col-lg-9">
                                        <h:inputSecret id="txtCustPassConfirm"  class="form-control" />
                                    </div>
                                </div>
                                <div class="form-group">
                                    <label for="txtCustEmail" class="col-lg-3 control-label">Email</label>
                                    <div class="col-lg-9">
                                        <h:inputText id="txtCustEmail"  value="#{customerBean.c.email}" class="form-control" />
                                    </div>
                                </div>
                                <div class="form-group">
                                    <label for="txtCustPhone" class="col-lg-3 control-label">Điện thoại</label>
                                    <div class="col-lg-9">
                                        <h:inputText id="txtCustPhone"  value="#{customerBean.c.phone}" class="form-control" />
                                    </div>
                                </div>

                                <div class="form-group">
                                    <label for="role" class="col-lg-3 control-label">Vai trò</label>
                                    <div class="col-lg-9">
                                    <!--<h:inputText id="role"  value="#{customerBean.roleId}" class="form-control" />-->
                                        <h:selectOneMenu value="#{customerBean.roleId}" class="">
                                            <f:selectItem itemValue="3" itemLabel="Người cần thuê" />
                                            <f:selectItem itemValue="2" itemLabel="Người cho thuê" />
                                        </h:selectOneMenu>
                                    </div>
                                </div>
                                <div class="form-group">
                                    <label for="inputImage" class="col-lg-3 control-label">Hình đại diện</label>
                                    <!--<input type="file" id="fileinput" multiple="multiple" accept="image/*" />-->
                                    <div class="col-lg-9">
                                        <h:inputFile  id="fileCustThumbnail" value="#{customerBean.image}" ></h:inputFile>

                                    </div>
                                </div>

                            </fieldset>
                        </div>
                        <div class="modal-footer">
                            <button type="button" class="btn btn-default" data-dismiss="modal">Hủy</button>
                            <h:commandButton action="#{customerBean.createUser()}"  class="btn btn-primary" value="Đăng ký"/>
                        </div>
                    </h:form>
                </div>
            </div>
        </div>

        <!-- Modal Register Room -->
        <div class="modal fade" id="user_register_room_modal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">
            <div class="modal-dialog" role="document">
                <div class="modal-content">
                    <div class="modal-header">
                        <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                        <h4 class="modal-title" id="myModalLabel">Thông tin đăng ký phòng</h4>
                    </div>
                    <h:form id="frmRegisterRoom" class="form-horizontal">
                        <div class="modal-body">
                            <fieldset>
                                <h:inputHidden id="hdlatt" value="#{custReq.latt}"/>
                                <h:inputHidden id="hdlong" value="#{custReq.longt}"/>
                                <h:inputHidden id="hdrad" value="#{custReq.rad}"/>
                                <h:inputHidden id="hdaddress" value="#{custReq.address}"/>

                                <label class="col-md-12" id="homepage_registerroom_info"></label>

                            </fieldset>
                        </div>
                        <div class="modal-footer" style="text-align: right">
                            <button type="button" class="btn btn-default" data-dismiss="modal">Đóng</button>
                            <h:commandButton class="btn btn-primary"  id="btnSendReq" value="Xác nhận" >
                                <f:ajax  execute="@form"   render="txtRequireResult" listener="#{custReq.createCustReq()}" onevent="checkSendRequire"/>
                            </h:commandButton>
                            <h:outputText id="txtRequireResult" value="#{custReq.requireResult}"  style="display:none"/>

                        </div>
                    </h:form>

                </div>
            </div>
        </div>

        <script>

//            $(document).ready(function () {
//                var maptmp = $(".mapapi");
//                // alert(maptmp.html());
//            });

        </script>
        <script src="https://maps.googleapis.com/maps/api/js?libraries=places&amp;callback=initMap"
                async="true" defer="true">
        </script>
    </h:body>
</html>
