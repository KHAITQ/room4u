<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
      xmlns:f="http://xmlns.jcp.org/jsf/core"
      xmlns:h="http://xmlns.jcp.org/jsf/html">

    <body>
        
        <ui:composition template="./template/Room4uTemplate.xhtml">
            <script type="text/javascript">
                        $(document).ready(function() {
            //             alert("#{customerBean.curCust.custName}");
                            var barChartData1 = {
                                labels: ["January", "February", "March", "April", "May", "June", "July"],
                                datasets: [
                                    {
                                        fillColor: "rgba(220,220,220,0.5)",
                                strokeColor: "rgba(220,220,220,1)",
                                data: [65, 59, 90, 81, 56, 55, 40]
                            },
                            {
                                fillColor: "rgba(151,187,205,0.5)",
                                strokeColor: "rgba(151,187,205,1)",
                                data: [28, 48, 40, 19, 96, 27, 100]
                            }
                            ,
                            {
                                fillColor: "rgba(255,187,205,0.5)",
                                strokeColor: "rgba(151,187,205,1)",
                                data: [128, 48, 40, 19, 96, 27, 100]
                            }
                        ]

                    };
                    new Chart(document.getElementById("bar1").getContext("2d")).Bar(barChartData1);
                });
            </script>
            <ui:define name="title">
                Thông tin cá nhân.
            </ui:define>

            <ui:define name="content">
                <div class="row" style="margin-top: 0px">
                    <div class="col-md-3">
                        <div class="list-group">
                            <div class="panel panel-default">
                                <div class="panel-heading profileImage" >
                                    <h:graphicImage value="/images/#{customerBean.curCust.images}"/><br/>
                                    <h:outputLabel value="#{customerBean.curCust.custName}" /><br/>
                                    <!--<h:outputLabel value="#{customerBean.curCust.registerDate}" />-->
                                    <!--<img class="row" src="./resources/images/upload/20151013170402happiness_love-wallpaper-1366x768.jpg"/>-->
                                    <!--<span class="row">Nick Ho</span>-->
                                    <span style="font-size: 12px;color:lightgrey">Đăng ký ngày #{customerBean.curCust.registerDate}</span>
                                </div>
                                <div class="panel-body profileSidebarMenu">
                                    <a href="#personalInfo" class="list-group-item active" data-toggle="tab" aria-expanded="false">
                                        <span class="glyphicon glyphicon-hand-right"></span>Thông tin cá nhân
                                    </a>
                                    <a href="#personalPass" class="list-group-item" data-toggle="tab" aria-expanded="false">
                                        <span class="glyphicon glyphicon-hand-right"></span>Đổi mật khẩu
                                    </a>
                                    <a href="#orderedRoom" class="list-group-item" data-toggle="tab" aria-expanded="false">
                                        <span class="glyphicon glyphicon-hand-right"></span>Danh sách đặt phòng
                                    </a>
                                    <h:panelGroup rendered="#{customerBean.curCust.roleId.roleId ==2}">
                                        <a href="#yourPostedRoom" class="list-group-item" data-toggle="tab" aria-expanded="false">
                                            <span class="glyphicon glyphicon-hand-right"></span>Phòng của bạn
                                        </a>

                                        <a href="#yourComment" class="list-group-item" data-toggle="tab" aria-expanded="false">
                                            <span class="glyphicon glyphicon-hand-right"></span>Bình luận
                                        </a>
                                        <a href="#yourReport" class="list-group-item" data-toggle="tab" aria-expanded="false">
                                            <span class="glyphicon glyphicon-hand-right"></span>Báo cáo
                                        </a>
                                    </h:panelGroup>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-9">
                        <div class="panel panel-default">
                            <div class="panel-body">
                                <div class="tab-pane fade active in" id="personalInfo">
                                    <legend>Thông tin cá nhân</legend>
                                    <h:form id="frmUserUpdate" class="form-horizontal" enctype="multipart/form-data" >
                                        <div class="modal-body">
                                            <fieldset>
                                                <div class="form-group">
                                                    <label for="txtCustName" class="col-lg-3 control-label">Tên bạn</label>
                                                    <div class="col-lg-9">
                                                        <h:inputText value="#{customerBean.curCust.custName}" id="txtCustName" class="form-control" />
                                                    </div>
                                                </div>
                                                <div class="form-group">
                                                    <label for="txtCustAccount" class="col-lg-3 control-label">Tên đăng nhập</label>
                                                    <div class="col-lg-9">
                                                        <h:inputText id="txtCustAccount" autocomplete="false"  value="#{customerBean.curCust.accountCustomer}" class="form-control" />
                                                    </div>
                                                </div>
                                                <div class="form-group">
                                                    <label for="txtCustPass" class="col-lg-3 control-label">Mật khẩu</label>
                                                    <div class="col-lg-9">
                                                        <h:inputSecret id="txtCustPass"  value="#{customerBean.curCust.password}" class="form-control" />
                                                    </div>
                                                </div>
                                                <div class="form-group">
                                                    <label for="txtCustEmail" class="col-lg-3 control-label">Email</label>
                                                    <div class="col-lg-9">
                                                        <h:inputText id="txtCustEmail"  value="#{customerBean.curCust.email}" class="form-control" />
                                                    </div>
                                                </div>
                                                <div class="form-group">
                                                    <label for="txtCustPhone" class="col-lg-3 control-label">Điện thoại</label>
                                                    <div class="col-lg-9">
                                                        <h:inputText id="txtCustPhone"  value="#{customerBean.curCust.phone}" class="form-control" />
                                                    </div>
                                                </div>

                                                <div class="form-group">
                                                    <label for="role" class="col-lg-3 control-label">Vai trò</label>
                                                    <div class="col-lg-9">
                                                    <!--<h:inputText id="role"  value="#{customerBean.roleId}" class="form-control" />-->
                                                        <h:selectOneMenu value="#{customerBean.roleId}" class="">
                                                            <f:selectItem itemValue="2" itemLabel="Người cho thuê" />
                                                            <f:selectItem itemValue="3" itemLabel="Người thuê phòng" />
                                                        </h:selectOneMenu>
                                                    </div>
                                                </div>
                                                <div class="form-group">
                                                    <label for="inputImage" class="col-lg-3 control-label">Hình đại diện</label>
                                                    <!--<input type="file" id="fileinput" multiple="multiple" accept="image/*" />-->
                                                    <div class="col-lg-9">
                                                        <h:inputFile id="fileCustThumbnail" value="#{customerBean.curCust.images}"></h:inputFile>
                                                    </div>
                                                </div>
                                            </fieldset>
                                        </div>
                                        <div class="modal-footer">
                                            <!--                                            <button type="button" class="btn btn-default" data-dismiss="modal">Hủy</button>-->
                                            <h:commandButton action="#{customerBean.createUser()}"  class="btn btn-primary" value="Cập nhật"/>
                                        </div>
                                    </h:form>


                                </div>
                                <div class="tab-pane fade active " id="personalPass">
                                    <h:form id="frmChangePassword" class="form-horizontal">

                                        <legend>Đổi mật khẩu</legend>
                                        <fieldset>

                                            <div class="form-group">
                                                <label for="txtCurentPass" class="col-lg-3 control-label">Mật khẩu hiện tại</label>
                                                <div class="col-lg-9">
                                                    <h:inputText id="txtCurentPass" value="#{customerBean.oldPassword}" class="form-control" />
                                                </div>
                                            </div>
                                            <div class="form-group">
                                                <label for="txtNewPass" class="col-lg-3 control-label">Mật khẩu mới</label>
                                                <div class="col-lg-9">
                                                    <h:inputText id="txtNewPass" value="#{customerBean.newPassword}" class="form-control" />
                                                </div>
                                            </div>

                                            <div class="form-group">
                                                <label for="txtConfirmNewPass" class="col-lg-3 control-label">Xác nhận mật khẩu mới</label>
                                                <div class="col-lg-9">
                                                    <h:inputText id="txtConfirmNewPass" value="#{customerBean.confirmPassword}" class="form-control"  />
                                                </div>
                                            </div>
                                        </fieldset>

                                        <div class="modal-footer" style="text-align: right">
                                            <!--<button type="button" class="btn btn-default" data-dismiss="modal">Đóng</button>-->
                                            <h:commandButton class="btn btn-primary" action="#{customerBean.changePassword()}" value="Đổi mật khẩu"/>
                                        </div>
                                    </h:form>
                                </div>
                                <div class="tab-pane fade active " id="orderedRoom">
                                    <legend>Danh sách phòng đã đặt</legend>
                                    <table class="table table-responsive table-hover ">
                                        <thead>
                                            <tr>
                                                <th>Số TT</th>
                                                <th>Số hóa đơn</th>
                                                <th>Hình</th>
                                                <th>Tên phòng</th>
                                                <th>Địa chỉ</th>
                                                <th>Tình trạng</th>

                                                <th>Ngày đặt</th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            <tr>
                                                <td>1</td>
                                                <td>Column content</td>
                                                <td>Column content</td>
                                                <td>Column content</td>
                                                <td>Column content</td>
                                                <td>Column content</td>
                                                <td>Column content</td>

                                                <td>
                                                    <a class="btn btn-primary"  data-toggle="modal" data-target="#customerDelete" ><span class="glyphicon glyphicon-trash"></span> Xóa</a>
                                                </td>

                                            </tr>
                                            <tr>
                                                <td>2</td>
                                                <td>Column content</td>
                                                <td>Column content</td>
                                                <td>Column content</td>
                                                <td>Column content</td>
                                                <td>Column content</td>
                                                <td>Column content</td>

                                                <td>
                                                    <a class="btn btn-primary"  data-toggle="modal" data-target="#customerDelete" ><span class="glyphicon glyphicon-trash"></span> Xóa</a>
                                                </td>
                                            </tr>
                                            <tr>
                                                <td>3</td>
                                                <td>Column content</td>
                                                <td>Column content</td>
                                                <td>Column content</td>
                                                <td>Column content</td>
                                                <td>Column content</td>
                                                <td>Column content</td>

                                                <td>
                                                    <a class="btn btn-primary"  data-toggle="modal" data-target="#customerDelete" ><span class="glyphicon glyphicon-trash"></span> Xóa</a>
                                                </td>
                                            </tr>
                                            <tr >
                                                <td>4</td>
                                                <td>Column content</td>
                                                <td>Column content</td>
                                                <td>Column content</td>
                                                <td>Column content</td>
                                                <td>Column content</td>
                                                <td>Column content</td>

                                                <td>
                                                    <a class="btn btn-primary"  data-toggle="modal" data-target="#customerDelete" ><span class="glyphicon glyphicon-trash"></span> Xóa</a>
                                                </td>
                                            </tr>
                                            <tr >
                                                <td>5</td>
                                                <td>Column content</td>
                                                <td>Column content</td>
                                                <td>Column content</td>
                                                <td>Column content</td>
                                                <td>Column content</td>
                                                <td>Column content</td>

                                                <td>
                                                    <a class="btn btn-primary"  data-toggle="modal" data-target="#customerDelete" ><span class="glyphicon glyphicon-trash"></span> Xóa</a>
                                                </td>
                                            </tr>
                                            <tr>
                                                <td>6</td>
                                                <td>Column content</td>
                                                <td>Column content</td>
                                                <td>Column content</td>
                                                <td>Column content</td>
                                                <td>Column content</td>
                                                <td>Column content</td>

                                                <td>
                                                    <a class="btn btn-primary"  data-toggle="modal" data-target="#customerDelete" ><span class="glyphicon glyphicon-trash"></span> Xóa</a>
                                                </td>

                                            </tr>
                                            <tr >
                                                <td>7</td>
                                                <td>Column content</td>
                                                <td>Column content</td>
                                                <td>Column content</td>
                                                <td>Column content</td>
                                                <td>Column content</td>
                                                <td>Column content</td>

                                                <td>
                                                    <a class="btn btn-primary"  data-toggle="modal" data-target="#customerDelete" ><span class="glyphicon glyphicon-trash"></span> Xóa</a>
                                                </td>

                                            </tr>
                                        </tbody>
                                    </table> 
                                </div>
                                <div class="tab-pane fade active " id="yourPostedRoom">
                                    <legend>Danh sách phòng của bạn</legend>
                                    <h:panelGroup id="pgDeleteRoom">
                                        <table class="table table-responsive table-hover ">
                                            <thead>
                                                <tr>
                                                    <th>STT</th>
                                                    <th>Hình</th>
                                                    <th>Tên phòng</th>
                                                    <th>Địa chỉ</th>
                                                    <th>Ngày đăng</th>
                                                </tr>
                                            </thead>
                                            <tbody>
                                                <h:outputText id="txtUpdateRoomResult" value="#{landlord.updateRoomResult}" />
                                                <ui:repeat var="room" value="#{landlord.displayRoomProfile()}" varStatus="status">
                                                    <tr>
                                                        <td>#{room.accomId}</td>
                                                        <td><img style="width: 60px"  class="main_image" src="#{room.images}" alt=""/></td>
                                                        <td>#{room.accomName}</td>
                                                        <td>#{room.address}</td>
                                                        <td>#{room.createdDate}</td>
                                                        <td>
                                                            <!--<a class="btn btn-primary"  data-toggle="modal" data-target="#customerEdit" ><span class="glyphicon glyphicon-pencil"></span> Sửa</a>-->
                                                            <!--<h:inputText id="txtUpdatedAccomId"  style="display: none"/>-->
                                                            <h:form id="frmUpdateAccom">
                                                                <h:commandButton class="btn btn-primary"  value="Sửa" >
                                                                    <f:ajax execute="@form" render="txtUpdateRoomResult" listener ="#{landlord.displayAccomUpdate(room)}" onevent="updateAccomSuccess" />
                                                                </h:commandButton>

                                                            </h:form>

                                                        </td>
                                                        <td>
                                                            <a class="btn btn-primary" onclick="assignDeletedAccomId(this)"  data-toggle="modal" data-target="#roomDelete" ><span class="glyphicon glyphicon-trash"></span> Xóa</a>
                                                        </td>
                                                    </tr>
                                                </ui:repeat>

                                            </tbody>
                                        </table> 
                                    </h:panelGroup>
                                </div>

                                <div class="tab-pane fade active " id="yourComment">
                                    <h:form id="frmUpdateCom">
                                        <!--<h:panelGroup id="refeshCom">-->
                                        <legend>Bình luận</legend>
                                        <table class="table table-responsive table-hover ">
                                            <thead>
                                                <tr>
                                                    <th>STT</th>
                                                    <th>Khách hàng</th>
                                                    <th>Tên phòng</th>
                                                    <th>Nội dung</th>
                                                    <th>Ngày đăng</th>
                                                    <th>Trả lời</th>
                                                </tr>
                                            </thead>
                                            <tbody>

                                                <ui:repeat var="com" value="#{landlord.displayCommentsByUser()}" varStatus="status">
                                                    <tr>
                                                        <td>#{com.comId}</td>
                                                        <td>#{com.custId.custName}</td>
                                                        <td>#{com.accomId.accomName}</td>
                                                        <td>#{com.content}</td>
                                                        <td>#{com.comDate}</td>
                                                        <td> <h:inputText value="#{com.answer}"/></td>
                                                        <td>
                                                            <h:commandLink class="btn btn-primary" action="#{landlord.updateComment(com)}"  >
                                                                <span class="glyphicon glyphicon-pencil"></span> 
                                                                Cập nhật
                                                                <f:ajax execute="@form" render="@form"/>
                                                            </h:commandLink>
                                                        </td>
                                                        <td>
                                                            <a class="btn btn-primary" onclick="assignDeletedComment(this)"  data-toggle="modal" data-target="#mdDeleteCom" ><span class="glyphicon glyphicon-trash"></span> Xóa</a>
                                                        </td>
                                                    </tr>
                                                </ui:repeat>

                                            </tbody>
                                        </table> 
                                        <!--</h:panelGroup>-->
                                    </h:form>
                                </div>

                                <div class="tab-pane fade active " id="yourReport">
                                    <legend>Báo cáo</legend>
                                    <!--<img src="./resources/images/r2.jpg"/>-->
                                    <div class="col-lg-6">
                                        <section class="panel">
                                            <header class="panel-heading">
                                                Bar
                                            </header>
                                            <div class="panel-body text-center">
                                                <canvas id="bar1" height="300" width="500"></canvas>
                                            </div>
                                        </section>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </ui:define>

        </ui:composition>

    </body>
</html>
